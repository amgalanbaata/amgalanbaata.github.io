const studentData = [
    {
        grade: "6-1",
        name: "–ë.–ê–Ω–≥–∞—Ä–∞–≥",
        certificates: [
            "shooter"
        ]
    },
    {
        grade: "6-1",
        name: "–ê.–ú”©–Ω–≥”©–Ω–∑—É–ª",
        certificates: [
            "duck"
        ],
    },
    {
        grade: "6-1",
        name: "–ë.–ê—Ä–∏–≥–±”©—Ö",
        certificates: [
            "coockie clicker"
        ],
    },
    {
        grade: "6-1",
        name: "–ë.–ê—Ä–º–∏",
        certificates: [
            "flappy bird"
        ],
    },
    {
        grade: "6-1",
        name: "–ë.–ë–æ–ª–¥-–û—Ä–≥–∏–ª",
        certificates: [
            "sigma ronaldo"
        ],
    },
    {
        grade: "6-1",
        name: "–ë.–ï—Å“Ø–π",
        certificates: [
            "jumping"
        ],
    },
    {
        grade: "6-1",
        name: "–ë.–¢—ç–Ω“Ø“Ø–Ω—Ç”©—Ä—á",
        certificates: [
            "jumping"
        ],
    },
    {
        grade: "6-1",
        name: "–ë.–•–∏—à–∏–≥–∂–∞—Ä–≥–∞–ª",
        certificates: [
            "change of clothes"
        ],
    },
    {
        grade: "6-1",
        name: "–ë.–•“Ø—Å–ª—ç–Ω",
        certificates: [
            "change of clothes"
        ],
    },
    {
        grade: "6-1",
        name: "–ì.–¢—ç–º“Ø“Ø–ª—ç–Ω",
        certificates: [
            "change of clothes"
        ],
    },
    {
        grade: "6-1",
        name: "–õ.–°–∞–π–Ω—Ö“Ø“Ø",
        certificates: [
            "soccer ball clicker"
        ],
    },
    {
        grade: "6-1",
        name: "–õ.–°–∞–π—Ö–∞–Ω–∑–∞—è–∞",
        certificates: [
            "anger game"
        ],
    },
    {
        grade: "6-1",
        name: "–ú.–ë–∞—è—Ä—Ü—ç—Ü—ç–≥",
        certificates: [
            "anger game"
        ],
    },
    {
        grade: "6-1",
        name: "–ú.–°–∞—Ä–∞–Ω–≥—É–∞",
        certificates: [
            "must play"
        ],
    },
    {
        grade: "6-1",
        name: "–û.–ß–∏–Ω–≥“Ø“Ø–Ω",
        certificates: [
            "ping pong"
        ],
    },
    {
        grade: "6-1",
        name: "”®.–î–∞–≤–∞–∞-–û—á–∏—Ä",
        certificates: [
            "clicker 4"
        ],
    },
    {
        grade: "6-1",
        name: "–¢.–ë–∞—Ç—Ç—É–ª–≥–∞",
        certificates: [
            "coockie clicker"
        ],
    },
    {
        grade: "6-1",
        name: "–¶.–ë–∏–Ω–¥—ç—Ä—ä—è–∞",
        certificates: [
            "lady egg"
        ],
    },
    {
        grade: "6-1",
        name: "–≠.–•—É–ª–∞–Ω–≥–æ–æ",
        certificates: [
            "platform"
        ],
    },
    {
        grade: "6-2",
        name: "–ê.–ú–∏—à—ç—ç–ª",
        certificates: [
            "jimmys adventure"
        ],
    },
    {
        grade: "6-2",
        name: "–ë.–ù–æ–º–∏–Ω-–≠—Ä–¥—ç–Ω—ç",
        certificates: [
            "delden gegdeehii"
        ],
    },
    {
        grade: "6-2",
        name: "–ë.–¢”©–≥”©–ª–¥”©—Ä",
        certificates: [
            "delden gegdeehii"
        ],
    },
    {
        grade: "6-2",
        name: "–ë.–¢—ç–º“Ø“Ø–ª—ç–Ω",
        certificates: [
            "bumbulug unagah"
        ],
    },
    {
        grade: "6-2",
        name: "–ë.–ß–∏–Ω–≥“Ø“Ø–Ω",
        certificates: [
            "shooting zombie"
        ],
    },
    {
        grade: "6-2",
        name: "–ì.–ê–Ω—É–¥–∞—Ä—å",
        certificates: [
            "snake"
        ],
    },
    {
        grade: "6-2",
        name: "–ì.–ú”©–Ω—Ö–±–∏–ª—ç–≥",
        certificates: [
            "“Ø—Å—Ä—ç–ª—Ç"
        ],
    },
    {
        grade: "6-2",
        name: "–ì.–¶—ç—Ü“Ø“Ø—Ö—ç–Ω",
        certificates: [
            "bumbugnuus bultah"
        ],
    },
    {
        grade: "6-2",
        name: "–î.–ì–∞–Ω-“Æ–∂–∏–Ω",
        certificates: [
            ""
        ],
    },
    {
        grade: "6-2",
        name: "–ú.–ì–∞–ª",
        certificates: [
            ""
        ],
    },
    {
        grade: "6-2",
        name: "–ú.–ï—Å”©–Ω-–≠—Ä–¥—ç–Ω—ç",
        certificates: [
            "jumpman"
        ],
    },
    {
        grade: "6-2",
        name: "–ú.–≠–≥—à–∏–≥–ª—ç–Ω",
        certificates: [
            "space waves"
        ],
    },
    {
        grade: "6-2",
        name: "–û.–ë–æ–¥—å—Ö“Ø“Ø",
        certificates: [
            "2 noob"
        ],
    },
    {
        grade: "6-2",
        name: "–û.–¢—ç–º“Ø“Ø–ª—ç–Ω",
        certificates: [
            "shaar tsohig"
        ],
    },
    {
        grade: "6-2",
        name: "–¢.–≠–Ω—Ö–±–æ–ª–¥",
        certificates: [
            "shaar tsohig"
        ],
    },
    {
        grade: "6-2",
        name: "–£.–ú–∞—Ä–≥–∞–¥",
        certificates: [
            ""
        ],
    },
    {
        grade: "6-2",
        name: "–•.–¢–æ–¥-–≠—Ä–¥—ç–Ω—ç",
        certificates: [
            "uraldaanii mashin"
        ],
    },
    {
        grade: "6-2",
        name: "–•.–£—É–≥–∞–Ω–±–∞—è—Ä",
        certificates: [
            "help"
        ],
    },
    {
        grade: "6-2",
        name: "–®.–ò–Ω–¥—Ä–∞",
        certificates: [
            "üòÇ dardag togloom"
        ],
    },
    {
        grade: "6-2",
        name: "–≠.–î—ç–ª–≥—ç—Ä–º”©—Ä”©–Ω",
        certificates: [
            "car racking game"
        ],
    },
    {
        grade: "6-2",
        name: "–≠.–•–∏—à–∏–≥—Ç”©–≥”©–ª–¥”©—Ä",
        certificates: [
            "zombie fight"
        ],
    },
    {
        grade: "7-1",
        name: "–ê.–¶—ç–ª–º“Ø“Ø–Ω",
        spoj:   "–ë–æ–¥–ª–æ–≥–æ-51 rank-7310",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–ë.–¢”©–≥”©–ª–¥”©—Ä",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-89 rank-4646",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–ë.–≠–Ω—Ö–∂–∏–Ω",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-95 rank-2797",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–î.–ë–∞—Ç–º”©–Ω—Ö",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-111 rank-1737",
        certificates: "images/spoj-certificate/7-1–î.–ë–∞—Ç–º”©–Ω—Ö.png"
    },
    {
        grade: "7-1",
        name: "–î.–ë–∞—è–Ω–º”©–Ω—Ö",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-103 rank-2166",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–î.–ù–æ–º—Ç—Ö“Ø“Ø",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-? rank-?",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–î.–ù—É–≥–∞–Ω–±–∏–ª—ç–≥",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-45 rank-8645",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–î.–•–æ—Å—à–∞–≥–∞–π",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-111 rank-1793",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–ú.–û—á–∏—Ä-–≠—Ä–¥—ç–Ω—ç",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-112 rank-1730",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–ú.–û—á–∏—Ä-–≠—Ä–¥—ç–Ω—ç",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-112 rank-1730",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–ú.–Ø–ª–≥—É—É–º—Ö“Ø“Ø",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-40 rank-9249",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–¢.–ê–Ω—É",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-102 rank-2218",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–¢.–≠–Ω—Ö-“Æ–∂–∏–Ω",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-115 rank-1613",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–¶.–û—Ä–≥–∏–ª—Å–∞–π—Ö–∞–Ω",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-80 rank-3858",
        certificates: [
        ],
    },
    {
        grade: "7-1",
        name: "–≠.–≠–Ω—Ö-–ê–º–≥–∞–ª–∞–Ω",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-103 rank-2179",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–ê.–ü“Ø—Ä—ç–≤–∂–∞–≤",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-82 rank-3645",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–ë.–î”©–ª–±–∞–¥—Ä–∞—Ö",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-122 rank-1373",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–ë.–ú”©–Ω—Ö–Ω–∞—Å–∞–Ω",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-111 rank-1797",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–ë.–≠—Ä–¥—ç–º–±–∏–ª—ç–≥",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-50 rank-7378",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–ë.–≠—Ä–º“Ø“Ø–Ω",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-103 rank-2167",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–ë.–≠—Ä—Ö—ç–º–±–∏–ª—ç–≥",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-41 rank-8728",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–ò.–ß–∏–Ω–≥“Ø–Ω—Å–∞–Ω–∞–∞",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-94 rank-2991",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–ù–∞—Ä–∞–Ω—Å–æ–ª–æ–Ω–≥–æ",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-146 rank-712",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–°.–ò–Ω–¥—Ä–∞",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-107 rank-1984",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–≠.–ù–∞–º—É—É–Ω–∞–∞",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-196 rank-253",
        certificates: [
        ],
    },
    {
        grade: "7-2",
        name: "–≠.–ß—É–ª–≥–∞—Ä",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-41 rank-8833",
        certificates: [
        ],
    },
    {
        grade: "8-1",
        name: "–ë.–î—ç–ª–≥—ç—Ä–¥–∞–ª–∞–π",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-41 rank-8833",
        certificates: [
        ],
    },
    {
        grade: "8-1",
        name: "–ë.–î—ç–ª–≥—ç—Ä–¥–∞–ª–∞–π",
        spoj: "–ë–æ–¥–ª–æ–≥–æ-41 rank-8833",
        certificates: [
        ],
    },
    {
        grade: "11-2",
        name: "–î.–≠—Ä–º“Ø“Ø–Ω",
        certificates: [
            "https://www.sololearn.com/certificates/CC-SC2YPODE",
            "https://www.sololearn.com/certificates/CC-JQVM0AAR",
            "https://www.sololearn.com/certificates/CC-2I7PPWXM"
        ]
    },
    {
        grade: "10-2",
        name: "–ê–Ω–≥–∞—Ä–∞–≥",
        certificates: [
            "https://www.sololearn.com/certificates/CC-ABC12345"
        ]
    }
];

// –ê–Ω–≥–∏ —Å–æ–Ω–≥–æ—Ö–æ–¥ —Ç—É—Ö–∞–π–Ω –∞–Ω–≥–∏–π–Ω –Ω—ç—Ä—Å–∏–π–≥ –æ—Ä—É—É–ª–Ω–∞
function updateStudentNames() {
const selectedGrade = document.getElementById('searchGrade').value;
const studentNameSelect = document.getElementById('studentName');

// clear old options
studentNameSelect.innerHTML = '<option value="">--–ù—ç—Ä —Å–æ–Ω–≥–æ—Ö--</option>';

if (!selectedGrade) return;

const filteredStudents = studentData.filter(student => student.grade === selectedGrade);

filteredStudents.forEach(student => {
    const option = document.createElement('option');
    option.value = student.name;
    option.textContent = student.name;
    studentNameSelect.appendChild(option);
});
}

// –ñ–∏—à—ç—ç: —Ö–∞–π–ª—Ç —Ö–∏–π—Ö —Ñ—É–Ω–∫—Ü (–Ω—ç—Ä —ç—Å–≤—ç–ª –∞–Ω–≥–∏–∞—Ä)
function filterStudents() {
    const grade = document.getElementById('searchGrade').value;
    const selectedName = document.getElementById('studentName').value;

    if (grade && !selectedName) {
        const studentsInGrade = studentData.filter(s => s.grade === grade);
        const encodedData = encodeURIComponent(JSON.stringify(studentsInGrade));
        window.location.href = `studentDetail.html?grade=${encodeURIComponent(grade)}&students=${encodedData}`;
    } else if (grade && selectedName) {
        const matchedStudent = studentData.find(s => s.grade === grade && s.name === selectedName);
        if (matchedStudent) {
            const certs = encodeURIComponent(JSON.stringify(matchedStudent.certificates || []));
            const spoj = encodeURIComponent(JSON.stringify(matchedStudent.spoj || []));
            window.location.href = `studentDetail.html?grade=${grade}&name=${encodeURIComponent(selectedName)}&spoj=${spoj}&certificates=${certs}`;
        } else {
            alert("–°—É—Ä–∞–≥—á –æ–ª–¥—Å–æ–Ω–≥“Ø–π.");
        }
    } else {
        alert("–ê–Ω–≥–∏ —Å–æ–Ω–≥–æ–Ω–æ —É—É.");
    }
}

// URL –ø–∞—Ä–∞–º–µ—Ç—Ä—É—É–¥—ã–≥ –∞–≤–∞—Ö
const params = new URLSearchParams(window.location.search);
const grade = params.get('grade') || "";
const name = params.get('name') || "";
const certsRaw = params.get('certificates') || "[]";
const spoj = params.get('spoj') || "[]";

const certContainer = document.getElementById('certificatesContainer');
const imageElement = document.getElementById('studentImage');
const gradeTypeElement = document.getElementById("gradeType");
const spojCerf = document.getElementById("spojCertificate");

// –•—É–≤–∏–π–Ω –∑—É—Ä–∞–≥ –æ—Ä—É—É–ª–∞—Ö
if (grade) {
    imageElement.src = `images/students/${grade}${name}.jpg`;
} else {
    imageElement.src = 'images/default.jpg'; // –∞–Ω–≥–∏ –±–∞–π—Ö–≥“Ø–π “Ø–µ–¥ default –∑—É—Ä–∞–≥
}

// –°—ç–¥–≤–∏–π–Ω –≥–∞—Ä—á–∏–≥ (gradeType) —Ç–æ–≥—Ç–æ–æ—Ö
if (["6-1", "6-2"].includes(grade)) {
    gradeTypeElement.innerHTML = "–ë“Ø—Ç—ç—ç–ª–∏–π–Ω –ù—ç—Ä:";
    certContainer.textContent = decodeURIComponent(certsRaw);
} else if (["7-1", "7-2"].includes(grade)) {
    gradeTypeElement.innerHTML = "Spoj.com –ê–ª–≥–æ—Ä–∏—Ç–º—á–∏–ª—Ç–∞–ª";
    certContainer.textContent = decodeURIComponent(spoj);
    if(certsRaw) {
        spojCerf.src = `images/spoj-certificate/${grade}${name}.png`;
    }
} else if (grade) {
    gradeTypeElement.innerHTML = "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É—É–¥:";

    let certificates = [];
    try {
        certificates = JSON.parse(decodeURIComponent(certsRaw));
    } catch (e) {
        console.error("–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã–≥ –∑–∞–¥–ª–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞:", e);
    }

    if (Array.isArray(certificates) && certificates.length > 0) {
        certificates.forEach((url, index) => {
            const a = document.createElement('a');
            a.href = url;
            a.target = "_blank";
            a.textContent = `–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç${index + 1}, `;
            certContainer.appendChild(a);
        });
    } else {
        certContainer.textContent = "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –º—ç–¥—ç—ç–ª—ç–ª –∞–ª–≥–∞.";
    }
}

// –ï—Ä”©–Ω—Ö–∏–π –º—ç–¥—ç—ç–ª–ª–∏–π–≥ —Ö–∞—Ä—É—É–ª–∞—Ö
if (grade) {
    document.getElementById('sectionTitle').textContent = `${grade} –∞–Ω–≥–∏ - ${name} —Å—É—Ä–∞–≥—á`;
    document.getElementById('gradeText').textContent = `–ê–Ω–≥–∏: ${grade}`;
    document.getElementById('studentName').textContent = `–ù—ç—Ä: ${name}`;
}


